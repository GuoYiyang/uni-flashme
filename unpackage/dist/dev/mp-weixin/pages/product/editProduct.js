(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/editProduct"],{327:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var i=o(n(328));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},328:function(t,e,n){"use strict";n.r(e);var o=n(329),i=n(331);for(var u in i)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(u);var r,a=n(37),s=Object(a["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);s.options.__file="pages/product/editProduct.vue",e["default"]=s.exports},329:function(t,e,n){"use strict";n.r(e);var o=n(330);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},330:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return r})),n.d(e,"recyclableRender",(function(){return u})),n.d(e,"components",(function(){return o}));try{o={"u-Form":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--form/u--form")]).then(n.bind(null,479))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,485))},"u-Input":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--input/u--input")]).then(n.bind(null,493))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,406))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,349))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,339))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement,n=(t._self._c,{"font-weight":300,"font-size":"14px","line-height":"16px",color:"#808080"});t._isMounted||(t.e0=function(e){t.showCate=!0},t.e1=function(e){t.showSet=!0},t.e2=function(e){t.showCate=!1},t.e3=function(e){t.showSet=!1}),t.$mp.data=Object.assign({},{$root:{a0:n}})},u=!1,r=[];i._withStripped=!0},331:function(t,e,n){"use strict";n.r(e);var o=n(332),i=n.n(o);for(var u in o)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(u);e["default"]=i.a},332:function(t,e,n){"use strict";(function(t){var o=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(5)),u=n(168),r=n(169),a=n(212),s={data:function(){return{productId:"",overlayShow:!1,tempFiles:[],imageValue:[],showSet:!1,form:{title:"",tag:"",tagText:"",set:"",setText:"",price:"",content:{}},imageStyles:{height:110,width:110,border:{color:"#E6E6E6",width:"1px",style:"solid",radius:"8px"}},showCate:!1,setList:[[]],cateList:[[{text:"写真",value:0},{text:"情侣",value:1},{text:"婚纱",value:2},{text:"职场",value:3},{text:"孕妇",value:4},{text:"宝宝",value:5},{text:"家庭",value:6}]],rules:{title:{type:"string",required:!0,min:2,max:20,message:"长度为2-20个字符",trigger:["blur","change"]}}}},methods:{cateSelect:function(t){this.form.tag=t.value[0].value,this.form.tagText=t.value[0].text,this.showCate=!1},setSelect:function(t){this.form.set=t.value[0].id,this.form.setText=t.value[0].name,this.showSet=!1},seleteImage:function(t){var e=this;t.tempFiles.map((function(t){e.tempFiles.push(t)}))},deleteImage:function(t){var e=this;this.tempFiles.map((function(n,o){n.path==t.tempFile.path&&e.tempFiles.splice(o,1)}))},publish:function(){var e=this;(0,u.publishProduct)({id:this.productId,userId:getApp().globalData.USER_ID,title:this.form.title,content:JSON.stringify(this.form.content),tags:this.form.tag.toString(),setId:this.form.set}).then((function(n){var o=(0,i.default)(n,2),u=(o[0],o[1]);1==u.data?t.showToast({title:"修改成功"}):(t.showToast({icon:"error",title:"修改失败"}),e.overlayShow=!1),setTimeout((function(){t.navigateBack()}),1e3)}))},submit:function(){var e=this;this.$refs.Form.validate().then((function(n){t.showLoading({title:"请稍等"}),e.overlayShow=!0,e.publish()})).catch((function(e){t.showToast({icon:"error",title:"正确"})}))}},onLoad:function(t){var e=this;this.productId=t.id,this.$refs.Form.setRules(this.rules),(0,u.productDetail)({id:t.id}).then((function(t){var n=(0,i.default)(t,2),o=(n[0],n[1]);e.form.title=o.data.title,e.form.tag=o.data.tags,e.form.tagText=(0,r.changeTag)(o.data.tags),e.form.set=o.data.setId,e.form.setText=o.data.setText,o.data.imgUrlList.map((function(t){var n=t.split("."),o={name:t,extname:n[n.length-1],url:t};e.imageValue.push(o)}))})),(0,a.getSetList)().then((function(t){var n=(0,i.default)(t,2),o=(n[0],n[1]);e.setList[0]=o.data}))}};e.default=s}).call(this,n(2)["default"])}},[[327,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/product/editProduct.js.map