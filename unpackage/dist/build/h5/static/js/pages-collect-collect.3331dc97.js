(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-collect-collect"],{"06d9":function(t,e,a){"use strict";a.r(e);var n=a("2a3b"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(l);e["default"]=i.a},"2a3b":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("c7eb")),l=n(a("1da1")),o=n(a("5530"));a("a9e3"),a("4de4"),a("d3b7"),a("ac1f"),a("14d9"),a("e9c4"),a("a434");var c={props:{value:Array,column:{type:[String,Number],default:2},maxColumn:{type:[String,Number],default:5},columnSpace:{type:[String,Number],default:2},imageKey:{type:[String],default:"image"},hideImageKey:{type:[String],default:"hide"},seat:{type:[String,Number],default:2},listStyle:{type:Object}},data:function(){return{data:{list:this.value?this.value:[],column:this.column<2?2:this.column,columnSpace:this.columnSpace<=5?this.columnSpace:5,imageKey:this.imageKey,seat:this.seat},msg:0,listInitStyle:{"border-radius":"12rpx","margin-bottom":"20rpx","background-color":"#fff"},adds:[],isLoaded:!0,curIndex:0,isRefresh:!0,flag:!1,refreshDatas:[]}},computed:{w:function(){var t="".concat(100/this.data.column-+this.data.columnSpace,"%");return t},m:function(){var t="".concat((100-(100/this.data.column-+this.data.columnSpace).toFixed(5)*this.data.column)/(this.data.column-1),"%");return t},s1:function(){return(0,o.default)((0,o.default)({},this.listInitStyle),this.listStyle)}},created:function(){this.refresh()},methods:{loadImages:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=0,n=this.data.list.filter((function(t,a){return a>=e})),i=0;i<n.length;i++)uni.getImageInfo({src:"".concat(n[i][this.imageKey],".jpg"),complete:function(i){a++,a==n.length&&t.initValue(e)}})},refresh:function(){var t=this;if(!this.isLoaded)return this.refreshDatas=this.value,!1;setTimeout((function(){t.refreshDatas=[],t.isRefresh=!0,t.adds=[],t.data.list=t.value?t.value:[],t.data.column=t.column<2?2:t.column>=t.maxColumn?t.maxColumn:t.column,t.data.columnSpace=t.columnSpace<=5?t.columnSpace:5,t.data.imageKey=t.imageKey,t.data.seat=t.seat,t.curIndex=0;for(var e=1;e<=t.data.column;e++)t.data["column_".concat(e,"_values")]=[],t.msg++;t.$nextTick((function(){t.initValue(t.curIndex,"refresh==>")}))}),1)},columnValue:function(t){return this.data["column_".concat(t+1,"_values")]},change:function(t){for(var e=0;e<this.data.list.length;e++)for(var a=this.data["column_".concat(this.data.list[e].column,"_values")],n=0;n<a.length;n++)if(t[e]&&e===a[n].index){this.data["column_".concat(this.data.list[e].column,"_values")][n]=Object.assign(a[n],t[e]),this.msg++;break}},getMin:function(t,e){for(var a=t[0][e],n=t[0],i=t.length-1;i>=0;i--)t[i][e]<a&&(a=t[i][e]);return n=t.filter((function(t){return t[e]==a})),n[0]},getMinColumnHeight:function(){var t=this;return new Promise((function(e){for(var a=[],n=function(n){var i=uni.createSelectorQuery().in(t);i.select("#waterfalls_flow_column_".concat(n)).boundingClientRect((function(t){a.push({column:n,height:t.height})})).exec((function(){t.data.column<=a.length&&e(t.getMin(a,"height"))}))},i=1;i<=t.data.column;i++)n(i)}))},initValue:function(t,e){var a=this;return(0,l.default)((0,i.default)().mark((function e(){var n,l;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.isLoaded=!1,!(t>=a.data.list.length||a.refreshDatas.length)){e.next=5;break}return a.msg++,a.loaded(),e.abrupt("return",!1);case 5:return e.next=7,a.getMinColumnHeight();case 7:n=e.sent,l=a.data["column_".concat(n.column,"_values")],a.data.list[t].column=n.column,l.push((0,o.default)((0,o.default)({},a.data.list[t]),{},{cIndex:l.length,index:t,o:0})),a.msg++;case 12:case"end":return e.stop()}}),e)})))()},imgLoad:function(t,e){var a=t.index;t.o=1,this.$set(this.data["column_".concat(e,"_values")],t.cIndex,JSON.parse(JSON.stringify(t))),this.initValue(a+1)},imgError:function(t,e){var a=t.index;t.o=1,t[this.data.imageKey]=null,this.$set(this.data["column_".concat(e,"_values")],t.cIndex,JSON.parse(JSON.stringify(t))),this.initValue(a+1)},loaded:function(){if(this.refreshDatas.length)return this.isLoaded=!0,this.refresh(),!1;this.curIndex=this.data.list.length,this.adds.length?(this.data.list=this.adds[0],this.adds.splice(0,1),this.initValue(this.curIndex)):(this.data.list.length&&this.$emit("loaded"),this.isLoaded=!0,this.isRefresh=!1)},wapperClick:function(t){this.$emit("wapperClick",t)},imageClick:function(t){this.$emit("imageClick",t)}},watch:{value:{deep:!0,handler:function(t,e){var a=this;setTimeout((function(){a.$nextTick((function(){if(a.isRefresh)return!1;if(a.isLoaded){if(t.length<=a.curIndex)return a.change(t);a.data.list=t,a.$nextTick((function(){a.initValue(a.curIndex,"watch==>")}))}else a.adds.push(t)}))}),10)}},column:function(t){this.refresh()}}};e.default=c},"2f1b":function(t,e,a){var n=a("83bf");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("b46fb840",n,!0,{sourceMap:!1,shadowMode:!1})},"3d57":function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("3835")),l=a("2b1d"),o=a("5a07"),c={loaded:function(){t("log","加载完成"," at pages/collect/collect.vue:56")},data:function(){return{tabsList:[{name:"我的收藏"},{name:"我的关注"}],tabsCurrent:0,collectProductShow:!0,collectPhotographerShow:!1,product:{list:[]},pher:{list:[]}}},methods:{clickPherCard:function(e){t("log",e," at pages/collect/collect.vue:80")},loaded:function(){},tabsChange:function(t){this.tabsCurrent=t.index,0==t.index&&(this.collectProductShow=!0,this.collectPhotographerShow=!1),1==t.index&&(this.collectProductShow=!1,this.collectPhotographerShow=!0)},wapperClick:function(t){uni.navigateTo({url:"../product/product?id="+t.id})},imageClick:function(t){uni.navigateTo({url:"../product/product?id="+t.id})}},onLoad:function(){},onShow:function(){var e=this;t("log","collect show"," at pages/collect/collect.vue:109");var a=this;a.tabsCurrent=0,a.collectProductShow=!0,a.collectPhotographerShow=!1,(0,l.getProductCollect)({userId:getApp().globalData.USER_ID}).then((function(t){var n=(0,i.default)(t,2),l=(n[0],n[1]);a.product.list=l.data,e.$refs.waterfallsFlowRef.refresh()})),(0,o.getPherCollect)({userId:getApp().globalData.USER_ID}).then((function(t){var e=(0,i.default)(t,2),n=(e[0],e[1]);a.pher.list=n.data}))},onPullDownRefresh:function(){uni.redirectTo({url:"/pages/collect/collect"})}};e.default=c}).call(this,a("0de9")["log"])},6263:function(t,e,a){"use strict";var n=a("2f1b"),i=a.n(n);i.a},"83bf":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */\n/* uni.scss */.center[data-v-bc0f172e]{height:100%;flex:auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.item[data-v-bc0f172e]{padding:%?10?% %?10?% %?20?%}.item .title[data-v-bc0f172e]{line-height:%?48?%;font-size:%?28?%;color:#222}.item .desc[data-v-bc0f172e]{font-size:%?24?%;color:#666}.item .grid-text[data-v-bc0f172e]{font-size:14px;color:#909399;padding:%?10?% 0 %?20?% %?0?%;box-sizing:border-box}',""]),t.exports=e},"87cd":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"waterfalls-flow"},t._l(t.data.column,(function(e,n){return a("v-uni-view",{key:n,staticClass:"waterfalls-flow-column",style:{width:t.w,"margin-left":0==n?0:t.m},attrs:{id:"waterfalls_flow_column_"+(n+1),msg:t.msg}},t._l(t.columnValue(n),(function(e,i){return a("v-uni-view",{key:i,class:["column-value",{"column-value-show":e.o}],style:[t.s1],on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.wapperClick(e)}}},[1==t.data.seat?a("v-uni-view",{staticClass:"inner"},[t._t("default",null,null,e)],2):t._e(),a("v-uni-image",{class:["img",{"img-hide":1==e[t.hideImageKey]||1==e[t.hideImageKey]},{"img-error":!e[t.data.imageKey]}],attrs:{src:e[t.data.imageKey],mode:"widthFix"},on:{load:function(a){arguments[0]=a=t.$handleEvent(a),t.imgLoad(e,n+1)},error:function(a){arguments[0]=a=t.$handleEvent(a),t.imgError(e,n+1)},click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.imageClick(e)}}}),2==t.data.seat?a("v-uni-view",{staticClass:"inner"},[t._t("default",null,null,e)],2):t._e()],1)})),1)})),1)},i=[]},"8b9b":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return n}));var n={uTabs:a("6e3e").default,customWaterfallsFlow:a("a310").default,fuiCard:a("a867").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"center"},[a("u-tabs",{attrs:{list:t.tabsList,lineWidth:"60",lineHeight:"3",lineColor:"#000000",activeStyle:{color:"#303133",fontWeight:"bold",transform:"scale(1.05)"},inactiveStyle:{color:"#606266",transform:"scale(1)"},itemStyle:"padding-left: 15px; padding-right: 15px; height: 34px;",current:t.tabsCurrent,scrollable:!1,duration:100},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.tabsChange.apply(void 0,arguments)}}})],1),t.collectProductShow?a("v-uni-view",[a("v-uni-view",{staticStyle:{padding:"10rpx"}},[a("custom-waterfalls-flow",{ref:"waterfallsFlowRef",attrs:{value:t.product.list,column:2,columnSpace:1.5,seat:2},on:{imageClick:function(e){arguments[0]=e=t.$handleEvent(e),t.imageClick.apply(void 0,arguments)},loaded:function(e){arguments[0]=e=t.$handleEvent(e),t.loaded.apply(void 0,arguments)},wapperClick:function(e){arguments[0]=e=t.$handleEvent(e),t.wapperClick.apply(void 0,arguments)}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"title"},[t._v(t._s(e.price))])],1)]}}],null,!1,1680232694)})],1)],1):t._e(),t.collectPhotographerShow?a("v-uni-view",{staticStyle:{"padding-top":"10rpx"}},t._l(t.pher.list,(function(e){return a("div",{key:e.id},[a("fui-card",{attrs:{src:e.avatar,title:e.nickname,tag:"优质摄影师"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickPherCard.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"fui-card__content",staticStyle:{padding:"20rpx"}},[t._v(t._s(e.desc))])],1)],1)})),0):t._e()],1)},l=[]},"8d00":function(t,e,a){"use strict";a.r(e);var n=a("8b9b"),i=a("bfb8");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);a("6263");var o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"bc0f172e",null,!1,n["a"],void 0);e["default"]=c.exports},a310:function(t,e,a){"use strict";a.r(e);var n=a("87cd"),i=a("06d9");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);a("fde9");var o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"b273d76e",null,!1,n["a"],void 0);e["default"]=c.exports},bd68:function(t,e,a){var n=a("f81f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("af1fa474",n,!0,{sourceMap:!1,shadowMode:!1})},bfb8:function(t,e,a){"use strict";a.r(e);var n=a("3d57"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(l);e["default"]=i.a},f81f:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */\n/* uni.scss */.waterfalls-flow[data-v-b273d76e]{overflow:hidden}.waterfalls-flow-column[data-v-b273d76e]{float:left}.column-value[data-v-b273d76e]{width:100%;font-size:0;overflow:hidden;transition:opacity .4s;opacity:0}.column-value-show[data-v-b273d76e]{opacity:1}.column-value .inner[data-v-b273d76e]{font-size:%?30?%}.column-value .img[data-v-b273d76e]{width:100%}.column-value .img-hide[data-v-b273d76e]{display:none}.column-value .img-error[data-v-b273d76e]{background:#f2f2f2 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAiAQMAAAAatXkPAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAAIZJREFUCNdlzjEKwkAUBNAfEGyCuYBkLyLuxRYW2SKlV1JSeA2tUiZg4YrLjv9PGsHqNTPMSAQuyAJgRDHSyvBPwtZoSJXakeJI9iuRLGDygdl6V0yKDtyMAeMPZySj8yfD+UapvRPj2JOwkyAooSV5IwdDjPdCPspe8LyTl9IKJvDETKKRv6vnlUasgg0fAAAAAElFTkSuQmCC) no-repeat 50%}',""]),t.exports=e},fde9:function(t,e,a){"use strict";var n=a("bd68"),i=a.n(n);i.a}}]);