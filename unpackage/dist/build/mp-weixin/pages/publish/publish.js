(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/publish/publish"],{"019d":function(t,e,n){"use strict";var i=n("aa30"),u=n.n(i);u.a},"057e":function(t,e,n){"use strict";n.r(e);var i=n("3bab"),u=n("ef59");for(var a in u)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return u[t]}))}(a);n("019d");var o=n("f0c5"),r=Object(o["a"])(u["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=r.exports},"08d2":function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=i(n("2eee")),a=i(n("c973")),o=i(n("278c")),r=n("2b1d"),s=(i(n("9adc")),{data:function(){return{img:"",imgUrl:"",imageList:[],imageUrlList:[],imageStyles:{height:100,width:100,border:{color:"#eee",width:"1px",style:"solid",radius:"10%"}},baseFormData:{title:"",price:"",introduction:{},tag:[],info:"",notice:""},sexs:[{text:"男",value:0},{text:"女",value:1}],tags:[{text:"写真",value:0},{text:"证件照",value:1},{text:"婚纱",value:2},{text:"情侣",value:3},{text:"亲子",value:4},{text:"宠物",value:5},{text:"旅拍",value:6},{text:"其他",value:7}]}},methods:{selectMainImg:function(t){this.img=t.tempFilePaths[0]},deleteMainImg:function(t){this.img=""},seleteImage:function(t){var e=this;t.tempFilePaths.map((function(t){e.imageList.push({name:"url",uri:t})}))},deleteImage:function(t){var e=this;this.imageList.map((function(n,i){n.uri==t.tempFilePath&&e.imageList.splice(i,1)}))},upload:function(){var t=this;""!=this.img&&(0,r.uploadImages)({filePath:this.img}).then((function(e){var n=(0,o.default)(e,2),i=(n[0],n[1]);t.imgUrl=i.data})),this.imageList.length>0&&this.imageList.forEach((function(e){(0,r.uploadImages)({filePath:e.uri}).then((function(e){var n=(0,o.default)(e,2),i=(n[0],n[1]);t.imageUrlList.push(i.data.toString())}))}))},publish:function(){(0,r.publishProduct)({userId:getApp().globalData.USER_ID,title:this.baseFormData.title,content:this.baseFormData.introduction,tags:this.baseFormData.tag.toString(),price:this.baseFormData.price,imgUrl:this.imgUrl,imgUrlList:this.imageUrlList}).then((function(e){var n=(0,o.default)(e,2),i=(n[0],n[1]);console.log(i),1==i.data?t.showToast({title:"发布成功"}):t.showToast({title:"发布失败"}),t.hideLoading(),t.navigateBack()}))},submit:function(){var e=this;return(0,a.default)(u.default.mark((function n(){return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.showLoading(),e.upload(),setTimeout((function(){e.publish()}),1e3);case 3:case"end":return n.stop()}}),n)})))()}}});e.default=s}).call(this,n("543d")["default"])},"3bab":function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uniCard:function(){return n.e("uni_modules/uni-card/components/uni-card/uni-card").then(n.bind(null,"3e8e"))},uniSection:function(){return n.e("uni_modules/uni-section/components/uni-section/uni-section").then(n.bind(null,"eb609"))},uniFilePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(n.bind(null,"40e5"))},uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"0bd9"))},uniFormsItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(n.bind(null,"4b20"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"1658"))},uniDataCheckbox:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox")]).then(n.bind(null,"826d"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"22c9"))}},u=function(){var t=this.$createElement;this._self._c},a=[]},"3c65":function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("dfdd");i(n("66fd"));var u=i(n("057e"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(u.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},aa30:function(t,e,n){},ef59:function(t,e,n){"use strict";n.r(e);var i=n("08d2"),u=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=u.a}},[["3c65","common/runtime","common/vendor"]]]);